<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>å”æšã’ãƒ‘ãƒ‹ãƒƒã‚¯ï¼šç§»å‹•ç·¨</title>
    <style>
        body { 
            margin: 0; padding: 0; text-align: center; 
            background-color: #d2b48c;
            background-image: linear-gradient(45deg, #deb887 25%, transparent 25%, transparent 75%, #deb887 75%, #deb887), linear-gradient(45deg, #deb887 25%, transparent 25%, transparent 75%, #deb887 75%, #deb887);
            background-size: 60px 60px; background-position: 0 0, 30px 30px;
            overflow: hidden; font-family: sans-serif; touch-action: none;
        }
        #order-ui { width: 100%; height: 60px; background: rgba(0,0,0,0.7); color: white; display: flex; align-items: center; justify-content: center; position: fixed; top: 0; }
        
        /* ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ */
        #char { font-size: 60px; position: absolute; bottom: 160px; left: 50%; transform: translateX(-50%); transition: left 0.1s linear; z-index: 10; }
        
        /* å”æšã’ */
        #karaage { font-size: 40px; position: absolute; bottom: 160px; display: none; }

        /* æ“ä½œãƒ‘ãƒãƒ« */
        #control-panel { width: 100%; height: 140px; background: #8b4513; position: fixed; bottom: 0; border-top: 5px solid #5d4037; display: flex; align-items: center; justify-content: space-around; }
        #status { color: white; font-weight: bold; position: fixed; bottom: 145px; width: 100%; text-shadow: 1px 1px 2px black; }
        #btn { width: 100px; height: 100px; background: #D2691E; color: white; border-radius: 50%; border: 3px solid #fff; font-size: 16px; font-weight: bold; }
    </style>
</head>
<body>
    <div id="order-ui">ğŸ´ æ³¨æ–‡ï¼šå”æšã’ã‚’æ‹¾ã£ã¦é£Ÿã¹ã‚ï¼</div>
    <div id="status">æº€è…¹åº¦: 0%</div>
    <div id="karaage">ğŸ—</div>
    <div id="char">ğŸ‘¨â€ğŸ³</div>
    
    <div id="control-panel">
        <div style="color: #ccc; font-size: 12px;">ç”»é¢ã®å·¦å³ã‚’<br>ã‚¿ãƒƒãƒã§ç§»å‹•</div>
        <button id="btn">é£Ÿã¹ã‚‹ï¼</button>
    </div>

    <script>
        let fullness = 0;
        let charX = 50; // ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã®æ¨ªä½ç½®ï¼ˆ%ï¼‰
        let karaageX = 20; // å”æšã’ã®æ¨ªä½ç½®ï¼ˆ%ï¼‰
        let hasKaraage = false;

        const char = document.getElementById('char');
        const karaage = document.getElementById('karaage');
        const status = document.getElementById('status');
        const btn = document.getElementById('btn');

        // å”æšã’ã‚’ãƒ©ãƒ³ãƒ€ãƒ ã«å‡ºç¾ã•ã›ã‚‹
        function spawnKaraage() {
            karaageX = Math.random() * 80 + 10;
            karaage.style.left = karaageX + "%";
            karaage.style.display = "block";
            hasKaraage = true;
        }
        spawnKaraage();

        // ç§»å‹•å‡¦ç†ï¼ˆç”»é¢ã‚¿ãƒƒãƒï¼‰
        window.addEventListener('touchstart', (e) => {
            const touchX = e.touches[0].clientX;
            const screenW = window.innerWidth;
            if (touchX < screenW / 2) {
                charX = Math.max(10, charX - 10); // å·¦ã¸
            } else {
                charX = Math.min(90, charX + 10); // å³ã¸
            }
            char.style.left = charX + "%";
        });

        // é£Ÿã¹ã‚‹ãƒœã‚¿ãƒ³
        btn.onclick = () => {
            // ã‚­ãƒ£ãƒ©ã¨å”æšã’ãŒè¿‘ã„ã‹åˆ¤å®šï¼ˆç°¡æ˜“åˆ¤å®šï¼‰
            let diff = Math.abs(charX - karaageX);
            if (hasKaraage && diff < 15) {
                fullness += 20;
                status.innerText = `æº€è…¹åº¦: ${fullness}%`;
                char.innerText = "ğŸ˜‹";
                karaage.style.display = "none";
                hasKaraage = false;
                
                setTimeout(() => { 
                    char.innerText = fullness >= 100 ? "ğŸˆµ" : "ğŸ‘¨â€ğŸ³"; 
                    if(fullness < 100) spawnKaraage(); // æ¬¡ã®å”æšã’
                }, 300);
            } else {
                char.innerText = "â“"; // é ã™ãã‚‹ã¨é£Ÿã¹ã‚‰ã‚Œãªã„
                setTimeout(() => { char.innerText = "ğŸ‘¨â€ğŸ³"; }, 300);
            }
        };
    </script>
</body>
</html>